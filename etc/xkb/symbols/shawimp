// Shavian Imperial keyboard layouts (merged with English QWERTY)
// Copyright (c) 2024 Neil Raiden (AGPL v.3)

// Shaw Imperial is named after the Shavian Imperial Good Companion Model 6 typewriter,
// produced in 1962 by **Imperial** in Leicester, England.

// ## Notes:
//  - the symbols missing in the original Model 6 typewriter layout are added to the digits row in shifted state
//  - symbols for ESH and OIL moved to different locations than original for easier access
//  - writing in English (lowercase/smallcaps) can be achieved by activating CapsLock feature (pressing both Shift keys)
//  - to deactivate CapsLock functionality press any of two Shift keys
//  - English (uppercase/largecaps) can be typed with Alt keys
//  - CapsLock key performs action of Escape key
//  - Escape key performs action for Left-Alt

// ## Installation:
// 1. Copy this file (shawimp) to `/etc/xkb/symbols/shawimp`
//```
//  sudo mkdir -p /etc/xkb/rules
//  sudo mkdir -p /etc/xkb/symbols
//  sudo cp shawimp /etc/xkb/symbols/
//```
// 2. Add following section to `/etc/xkb/rules/evdev.xml`:
//```
//<?xml version="1.0" encoding="UTF-8"?>
//<!DOCTYPE xkbConfigRegistry SYSTEM "xkb.dtd">
//<xkbConfigRegistry version="1.1">
//  <layoutList>
//    <layout>
//      <configItem>
//        <name>shawimp</name>
//        <shortDescription>ShawImp</shortDescription>
//        <description>Shavian (Imperial)</description>
//        <countryList><iso3166Id>US</iso3166Id></countryList>
//        <languageList><iso639Id>eng</iso639Id></languageList>
//      </configItem>
//    </layout>
//  </layoutList>
//</xkbConfigRegistry>
//```
// 3. (optional) add the following line to `/etc/xkb/rules/evdev`. Note that GNOME layout switcher ignores the `evdev` file and uses only the `evdev.xml`:
//```
//! option = symbols
//  shawimp:imperial  = +shawimp(imperial)
//! include %S/evdev
//```
// 4. Testing:
//	- activate ShavianImperidal: `setxkbmap -layout shawimp`,
//  - test it by simply typing with the new layout,
//  - if setxkbmap returns "Error loading new keyboard description", then it's possible that your Linux distro runs xkb with elevated privileges and ignores files in /etc/xkb/symbols. In such case create a link: `sudo ln -s /etc/xkb/symbols/shawimp /usr/share/X11/xkb/symbols/shawimp`,
//	- reset back to default layout: `setxkbmap us`

// ## Unshifted:
// â”Œâ”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”
// â”‚ â¸° â”‚ Â· â”‚ ğ‘¬ â”‚ ğ‘» â”‚ ğ‘« â”‚ ğ‘º â”‚ ğ‘œ â”‚ ğ‘– â”‚ ğ‘— â”‚ ğ‘™ â”‚ ğ‘˜ â”‚ ğ‘¡ â”‚ ğ‘” â”‚ bksp â”‚
// â”œâ”€â”€â”€â”´â”€â”¬â”€â”´â”€â”¬â”€â”´â”€â”¬â”€â”´â”€â”¬â”€â”´â”€â”¬â”€â”´â”€â”¬â”€â”´â”€â”¬â”€â”´â”€â”¬â”€â”´â”€â”¬â”€â”´â”€â”¬â”€â”´â”€â”¬â”€â”´â”€â”¬â”€â”´â”€â”¬â”€â”€â”€â”€â”¤
// â”‚ tab â”‚ ğ‘­ â”‚ ğ‘· â”‚ ğ‘µ â”‚ ğ‘± â”‚ ğ‘³ â”‚ ğ‘“ â”‚ ğ‘ â”‚ ğ‘¤ â”‚ ğ‘¥ â”‚ ğ‘’ â”‚ ğ‘¢ â”‚ ğ‘£ â”‚ ğ‘   â”‚
// â”œâ”€â”€â”€â”€â”€â”´â”€â”¬â”€â”´â”€â”¬â”€â”´â”€â”¬â”€â”´â”€â”¬â”€â”´â”€â”¬â”€â”´â”€â”¬â”€â”´â”€â”¬â”€â”´â”€â”¬â”€â”´â”€â”¬â”€â”´â”€â”¬â”€â”´â”€â”¬â”€â”´â”€â”¬â”€â”´â”€â”€â”€â”€â”¤
// â”‚  Esc  â”‚ ğ‘ª â”‚ ğ‘¨ â”‚ ğ‘¦ â”‚ ğ‘© â”‚ ğ‘§ â”‚ ğ‘ â”‚ ğ‘¯ â”‚ ğ‘‘ â”‚ ğ‘® â”‚ ğ‘• â”‚ ğ‘› â”‚  Ent â”‚
// â”œâ”€â”€â”€â”€â”€â”€â”€â”´â”€â”¬â”€â”´â”€â”¬â”€â”´â”€â”¬â”€â”´â”€â”¬â”€â”´â”€â”¬â”€â”´â”€â”¬â”€â”´â”€â”¬â”€â”´â”€â”¬â”€â”´â”€â”¬â”€â”´â”€â”¬â”€â”´â”€â”¬â”€â”´â”€â”€â”€â”€â”€â”€â”¤
// â”‚  shift  â”‚ ğ‘¾ â”‚ ğ‘² â”‚ ğ‘´ â”‚ ğ‘° â”‚ ğ‘š â”‚ ğ‘ â”‚ ğ‘Ÿ â”‚ , â”‚ . â”‚ / â”‚  shift â”‚
// â”œâ”€â”€â”€â”€â”€â”€â”¬â”€â”€â”´â”€â”€â”¬â”´â”€â”€â”€â”´â”€â”¬â”€â”´â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”´â”€â”¬â”€â”´â”€â”€â”€â”´â”¬â”€â”€â”€â”€â”€â”€â”€â”¤
// â”‚ ctrl â”‚ win â”‚ Ralt â”‚         space         â”‚ Ralt â”‚  ctrl â”‚
// â””â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”˜

// ## Shifted: 
// â”Œâ”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”
// â”‚ â—¦ â”‚ â€¢ â”‚ ğ‘¶ â”‚ ğ‘¸ â”‚ ğ‘¿ â”‚ ğ‘¹ â”‚ ğ‘¼ â”‚ ğ‘½ â”‚ * â”‚ - â”‚ ( â”‚ ) â”‚ = â”‚ bksp â”‚
// â”œâ”€â”€â”€â”´â”€â”¬â”€â”´â”€â”¬â”€â”´â”€â”¬â”€â”´â”€â”¬â”€â”´â”€â”¬â”€â”´â”€â”¬â”€â”´â”€â”¬â”€â”´â”€â”¬â”€â”´â”€â”¬â”€â”´â”€â”¬â”€â”´â”€â”¬â”€â”´â”€â”¬â”€â”´â”€â”¬â”€â”€â”€â”€â”¤
// â”‚ tab â”‚ q â”‚ w â”‚ e â”‚ r â”‚ t â”‚ y â”‚ u â”‚ i â”‚ o â”‚ p â”‚ ! â”‚ & â”‚ ~  â”‚
// â”œâ”€â”€â”€â”€â”€â”´â”€â”¬â”€â”´â”€â”¬â”€â”´â”€â”¬â”€â”´â”€â”¬â”€â”´â”€â”¬â”€â”´â”€â”¬â”€â”´â”€â”¬â”€â”´â”€â”¬â”€â”´â”€â”¬â”€â”´â”€â”¬â”€â”´â”€â”¬â”€â”´â”€â”¬â”€â”´â”€â”€â”€â”€â”¤
// â”‚  Esc  â”‚ a â”‚ s â”‚ d â”‚ f â”‚ g â”‚ h â”‚ j â”‚ k â”‚ l â”‚ ' â”‚ " â”‚  Ent â”‚
// â”œâ”€â”€â”€â”€â”€â”€â”€â”´â”€â”¬â”€â”´â”€â”¬â”€â”´â”€â”¬â”€â”´â”€â”¬â”€â”´â”€â”¬â”€â”´â”€â”¬â”€â”´â”€â”¬â”€â”´â”€â”¬â”€â”´â”€â”¬â”€â”´â”€â”¬â”€â”´â”€â”¬â”€â”´â”€â”€â”€â”€â”€â”€â”¤
// â”‚  shift  â”‚ z â”‚ x â”‚ c â”‚ v â”‚ b â”‚ n â”‚ m â”‚ ; â”‚ : â”‚ ? â”‚  shift â”‚
// â”œâ”€â”€â”€â”€â”€â”€â”¬â”€â”€â”´â”€â”€â”¬â”´â”€â”€â”€â”´â”€â”¬â”€â”´â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”´â”€â”¬â”€â”´â”€â”€â”€â”´â”¬â”€â”€â”€â”€â”€â”€â”€â”¤
// â”‚ ctrl â”‚ win â”‚ Ralt â”‚         space         â”‚ Ralt â”‚  ctrl â”‚
// â””â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”˜

// ## AltGr (Right-Alt):
// â”Œâ”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”
// â”‚ 0 â”‚ 1 â”‚ 2 â”‚ 3 â”‚ 4 â”‚ 5 â”‚ 6 â”‚ 7 â”‚ 8 â”‚ 9 â”‚ [ â”‚ ] â”‚ _ â”‚ bksp â”‚
// â”œâ”€â”€â”€â”´â”€â”¬â”€â”´â”€â”¬â”€â”´â”€â”¬â”€â”´â”€â”¬â”€â”´â”€â”¬â”€â”´â”€â”¬â”€â”´â”€â”¬â”€â”´â”€â”¬â”€â”´â”€â”¬â”€â”´â”€â”¬â”€â”´â”€â”¬â”€â”´â”€â”¬â”€â”´â”€â”¬â”€â”€â”€â”€â”¤
// â”‚ tab â”‚ Q â”‚ W â”‚ E â”‚ R â”‚ T â”‚ Y â”‚ U â”‚ I â”‚ O â”‚ P â”‚ { â”‚ } â”‚ |  â”‚
// â”œâ”€â”€â”€â”€â”€â”´â”€â”¬â”€â”´â”€â”¬â”€â”´â”€â”¬â”€â”´â”€â”¬â”€â”´â”€â”¬â”€â”´â”€â”¬â”€â”´â”€â”¬â”€â”´â”€â”¬â”€â”´â”€â”¬â”€â”´â”€â”¬â”€â”´â”€â”¬â”€â”´â”€â”¬â”€â”´â”€â”€â”€â”€â”¤
// â”‚  Esc  â”‚ A â”‚ S â”‚ D â”‚ F â”‚ G â”‚ H â”‚ J â”‚ K â”‚ L â”‚ Â« â”‚ Â» â”‚  Ent â”‚
// â”œâ”€â”€â”€â”€â”€â”€â”€â”´â”€â”¬â”€â”´â”€â”¬â”€â”´â”€â”¬â”€â”´â”€â”¬â”€â”´â”€â”¬â”€â”´â”€â”¬â”€â”´â”€â”¬â”€â”´â”€â”¬â”€â”´â”€â”¬â”€â”´â”€â”¬â”€â”´â”€â”¬â”€â”´â”€â”€â”€â”€â”€â”€â”¤
// â”‚  shift  â”‚ Z â”‚ X â”‚ C â”‚ V â”‚ B â”‚ N â”‚ M â”‚ â€œ â”‚ â€ â”‚ â€¦ â”‚  shift â”‚
// â”œâ”€â”€â”€â”€â”€â”€â”¬â”€â”€â”´â”€â”€â”¬â”´â”€â”€â”€â”´â”€â”¬â”€â”´â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”´â”€â”¬â”€â”´â”€â”€â”€â”´â”¬â”€â”€â”€â”€â”€â”€â”€â”¤
// â”‚ ctrl â”‚ win â”‚ Ralt â”‚        M-space        â”‚ Ralt â”‚  ctrl â”‚
// â””â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”˜

// ## AltGr+Shift (Right-Alt+Shift):
// â”Œâ”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”
// â”‚ ` â”‚ Â´ â”‚ @ â”‚ # â”‚ $ â”‚ % â”‚ ^ â”‚ & â”‚ Ã— â”‚ Ã· â”‚ < â”‚ > â”‚ + â”‚ bksp â”‚
// â”œâ”€â”€â”€â”´â”€â”¬â”€â”´â”€â”¬â”€â”´â”€â”¬â”€â”´â”€â”¬â”€â”´â”€â”¬â”€â”´â”€â”¬â”€â”´â”€â”¬â”€â”´â”€â”¬â”€â”´â”€â”¬â”€â”´â”€â”¬â”€â”´â”€â”¬â”€â”´â”€â”¬â”€â”´â”€â”¬â”€â”€â”€â”€â”¤
// â”‚ tab â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚ \  â”‚
// â”œâ”€â”€â”€â”€â”€â”´â”€â”¬â”€â”´â”€â”¬â”€â”´â”€â”¬â”€â”´â”€â”¬â”€â”´â”€â”¬â”€â”´â”€â”¬â”€â”´â”€â”¬â”€â”´â”€â”¬â”€â”´â”€â”¬â”€â”´â”€â”¬â”€â”´â”€â”¬â”€â”´â”€â”¬â”€â”´â”€â”€â”€â”€â”¤
// â”‚  Esc  â”‚   â”‚   â”‚   â”‚   â”‚   â”‚ â€ â”‚   â”‚   â”‚ â‚¤ â”‚ â€¹ â”‚ â€º â”‚  Ent â”‚
// â”œâ”€â”€â”€â”€â”€â”€â”€â”´â”€â”¬â”€â”´â”€â”¬â”€â”´â”€â”¬â”€â”´â”€â”¬â”€â”´â”€â”¬â”€â”´â”€â”¬â”€â”´â”€â”¬â”€â”´â”€â”¬â”€â”´â”€â”¬â”€â”´â”€â”¬â”€â”´â”€â”¬â”€â”´â”€â”€â”€â”€â”€â”€â”¤
// â”‚  shift  â”‚   â”‚   â”‚   â”‚ âƒ â”‚ â—‹ â”‚ â€“ â”‚ â€” â”‚ â€˜ â”‚ â€™ â”‚   â”‚  shift â”‚
// â”œâ”€â”€â”€â”€â”€â”€â”¬â”€â”€â”´â”€â”€â”¬â”´â”€â”€â”€â”´â”€â”¬â”€â”´â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”´â”€â”¬â”€â”´â”€â”€â”€â”´â”¬â”€â”€â”€â”€â”€â”€â”€â”¤
// â”‚ ctrl â”‚ win â”‚ Ralt â”‚   zero-width space    â”‚ Ralt â”‚  ctrl â”‚
// â””â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”˜

// vim ":set ts=14"

default partial alphanumeric_keys modifier_keys
xkb_symbols "imperial" {

    name[Group1]= "Shavian (Imperial)";

//	   Unshifted,	Shifted,	AltGr,	Shift+AltGr
    key <TLDE> { [ U2E30,	U25E6,	0,	grave	] }; // â¸° â—¦ 0 `  ;
    key <AE01> { [ U00B7,	U2022,	1, 	acute	] }; // Â· â€¢ 1 Â´  ;
    key <AE02> { [ U1046C,	U10476,	2,	at	] }; // ğ‘¬ ğ‘¶ 2 @  ;
    key <AE03> { [ U1047B,	U10478,	3,	numbersign	] }; // ğ‘» ğ‘¸ 3 #  ;
    key <AE04> { [ U1046B,	U1047F,	4,	dollar	] }; // ğ‘« ğ‘¿ 4 $  ;
    key <AE05> { [ U1047A,	U10479,	5,	percent	] }; // ğ‘º ğ‘¹ 5 %  ;
    key <AE06> { [ U1045C,	U1047C,	6,	asciicircum	] }; // ğ‘œ ğ‘¼ 6 ^  ;
    key <AE07> { [ U10456,	U1047D,	7,	ampersand	] }; // ğ‘– ğ‘½ 7 &  ;
    key <AE08> { [ U10457,	asterisk,	8,	U00D7	] }; // ğ‘— * 8 Ã—  ;
    key <AE09> { [ U10459,	minus, 	9,	U00F7	] }; // ğ‘™ - 9 Ã·  ;
    key <AE10> { [ U10458,	parenleft,	bracketleft,	less	] }; // ğ‘˜ ( [ <  ;
    key <AE11> { [ U10461,	parenright,	bracketright,	greater	] }; // ğ‘¡ ) ] >  ;
    key <AE12> { [ U10454,	equal,	underscore,	plus	] }; // ğ‘” = _ +  ;

    key <AD01> { [ U1046D,	q,	Q,	VoidSymbol	] }; // ğ‘­ q Q    ;
    key <AD02> { [ U10477,	w,	W,	VoidSymbol	] }; // ğ‘· w W    ;
    key <AD03> { [ U10475,	e,	E,	VoidSymbol	] }; // ğ‘µ e E    ;
    key <AD04> { [ U10471,	r,	R,	VoidSymbol	] }; // ğ‘± r R    ;
    key <AD05> { [ U10473,	t,	T,	VoidSymbol	] }; // ğ‘³ t T    ;
    key <AD06> { [ U10453,	y,	Y,	VoidSymbol	] }; // ğ‘“ y Y    ;
    key <AD07> { [ U1045E,	u,	U,	VoidSymbol	] }; // ğ‘ u U    ;
    key <AD08> { [ U10464,	i,	I,	VoidSymbol	] }; // ğ‘¤ i I    ;
    key <AD09> { [ U10465,	o,	O,	VoidSymbol	] }; // ğ‘¥ o O    ;
    key <AD10> { [ U10452,	p,	P,	VoidSymbol	] }; // ğ‘’ p P    ;
    key <AD11> { [ U10462,	exclam,	braceleft,	VoidSymbol	] }; // ğ‘¢ ! {    ;
    key <AD12> { [ U10463,	ampersand, 	braceright,	VoidSymbol	] }; // ğ‘£ & }    ;
    key <BKSL> { [ U10460,	asciitilde,	bar,	backslash	] }; // ğ‘  ~ | \  ;

    key <AC01> { [ U1046A,	a,	A,	VoidSymbol	] }; // ğ‘ª a A    ;
    key <AC02> { [ U10468,	s,	S,	VoidSymbol	] }; // ğ‘¨ s S    ;
    key <AC03> { [ U10466,	d,	D,	VoidSymbol	] }; // ğ‘¦ d D    ;
    key <AC04> { [ U10469,	f,	F,	VoidSymbol	] }; // ğ‘© f F    ;
    key <AC05> { [ U10467,	g,	G,	VoidSymbol	] }; // ğ‘§ g G    ;
    key <AC06> { [ U10450,	h,	H,	U2010	] }; // ğ‘ h H â€  ; â€ hyphen
    key <AC07> { [ U1046F,	j,	J,	VoidSymbol	] }; // ğ‘¯ j J    ; 
    key <AC08> { [ U10451,	k,	K,	VoidSymbol	] }; // ğ‘‘ k K    ; 
    key <AC09> { [ U1046E,	l,	L,	U20A4	] }; // ğ‘® l L â‚¤  ; 
    key <AC10> { [ U10455,	apostrophe,	U00AB,	U2039	] }; // ğ‘• ' Â« â€¹  ; Â« U00ab (guillemotleft)
    key <AC11> { [ U1045B,	quotedbl,	U00BB,	U203A	] }; // ğ‘› " Â» â€º  ; Â» U00bb (guillemotright)

    key <AB01> { [ U1047E,	z,	Z,	VoidSymbol	] }; // ğ‘¾ z Z   ;  
    key <AB02> { [ U10472,	x,	X,	VoidSymbol	] }; // ğ‘² x X   ; 
    key <AB03> { [ U10474,	c,	C,	VoidSymbol	] }; // ğ‘´ c C   ;  
    key <AB04> { [ U10470,	v,	V,	U2043	] }; // ğ‘° v V âƒ ; âƒ (U2043 hyphen-bullet)
    key <AB05> { [ U1045A,	b,	B,	U25CB	] }; // ğ‘š b B â—‹ ; â—‹ (U25cb white circle)
    key <AB06> { [ U1045D,	n,	N,	U2013	] }; // ğ‘ n N â€“ ; â€“ (N-dash) 
    key <AB07> { [ U1045F,	m,	M,	U2014	] }; // ğ‘Ÿ m M â€” ; â€” (M-dash)
    key <AB08> { [ comma,	semicolon,	U201C,	U2018	] }; // , ; â€œ â€˜ ;
    key <AB09> { [ period,	colon,	U201D,	U2019	] }; // . : â€ â€™ ;
    key <AB10> { [ slash,	question,	U2026,	VoidSymbol	] }; // / ? â€¦   ; â€¦ (ellipsis)

    key <SPCE> { [  space,	space,	U2003,	U200B	] }; // U2003 M-space, U200B zero-width space

    replace key <CAPS> {
        type = "ALPHABETIC",
        symbols = [ Escape, Escape ],
        actions [Group1] = [ SetMods(modifiers=none), SetMods(modifiers=Lock,clearLocks) ]
    };

    replace key <ESC> { [ Alt_L, Alt_L ] };

    include "shift(both_capslock_cancel)"

    // both LAlt and RAlt switch to level3
    include "level3(alt_switch)"

    // compose key
    include "compose(paus)"

};

